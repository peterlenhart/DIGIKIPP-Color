<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>DigiKipp – KIPP-ANZAHL Stellrad Demo</title>

<style>
  :root{
    --bg: #2b1411;
    --panel: rgba(75, 40, 30, 0.75);
    --beige: rgba(234,215,190,0.96);
    --rotbraun: #7a3f2b;

    --slot: #4a2418;
    --shadow: rgba(0,0,0,0.55);
  }

  *{ box-sizing: border-box; }
  body{
    margin:0;
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    background:
      radial-gradient(1200px 700px at 50% 30%, rgba(255,255,255,0.06), rgba(0,0,0,0)),
      linear-gradient(180deg, #3a1b16, #140707);
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    color: var(--beige);
  }

  /* Panel (Zeile 9–11 Gefühl: kompakt, breit) */
  .kippPanel{
    width: min(92vw, 720px);
    height: 210px;
    border-radius: 18px;
    padding: 16px 18px;
    position: relative;
    background: var(--panel);
    border: 2px solid rgba(0,0,0,0.55);
    box-shadow:
      0 18px 36px rgba(0,0,0,0.35),
      inset 0 1px 0 rgba(255,255,255,0.10);
  }

  .title{
    font-weight: 1000;
    letter-spacing: 0.06em;
    font-size: clamp(28px, 5.6vw, 46px);
    text-shadow:
      0 3px 0 rgba(0,0,0,0.85),
      0 10px 24px rgba(0,0,0,0.55);
    margin-bottom: 10px;
  }

  /* Doppelpfeil: Linie + Spitzen */
  .doubleArrow{
    position: absolute;
    left: 18px;
    top: 74px;
    width: min(520px, 64%);
    height: 24px;
    opacity: 0.95;
    display: flex;
    align-items:center;
    gap: 10px;
    pointer-events: none;
  }
  .doubleArrow .tip{
    width: 0; height: 0;
    border-top: 8px solid transparent;
    border-bottom: 8px solid transparent;
  }
  .doubleArrow .tip.left{  border-right: 14px solid rgba(234,215,190,0.9); }
  .doubleArrow .tip.right{ border-left: 14px solid rgba(234,215,190,0.9); }
  .doubleArrow .line{
    flex:1;
    height: 4px;
    border-radius: 999px;
    background: rgba(234,215,190,0.88);
    box-shadow: 0 2px 0 rgba(0,0,0,0.65);
  }

  /* Bereich links: Rad + Fenster + Skala */
  .leftArea{
    position:absolute;
    left:18px;
    right: 160px; /* Platz für KIPP Button */
    top: 96px;
    height: 96px;
  }

  /* Minimaler Schlitz (kaum sichtbar) */
  .slot{
    position:absolute;
    left: 6px;
    top: 18px;
    width: 72%;
    height: 18px;
    border-radius: 999px;
    background:
      linear-gradient(180deg, rgba(255,255,255,0.06), rgba(0,0,0,0.20)),
      var(--slot);
    box-shadow:
      inset 0 2px 0 rgba(255,255,255,0.14),
      inset 0 -4px 8px rgba(0,0,0,0.55);
    opacity: 0.75; /* wirklich nur „Hauch“ */
  }

  /* Stellrad: silber + geriffelt */
  .wheel{
    position:absolute;
    left: 18px;
    top: 0px;
    width: 66%;
    height: 52px;
    border-radius: 999px;
    cursor: grab;
    user-select:none;
    -webkit-tap-highlight-color: transparent;

    background:
      radial-gradient(140% 160% at 20% 20%, rgba(255,255,255,0.90), rgba(255,255,255,0.0) 44%),
      linear-gradient(180deg, #f2f2f2, #d4d4d4 35%, #bcbcbc 55%, #f6f6f6),
      repeating-linear-gradient(
        90deg,
        rgba(0,0,0,0.22) 0px,
        rgba(0,0,0,0.22) 2px,
        rgba(255,255,255,0.18) 2px,
        rgba(255,255,255,0.18) 7px
      );
    border: 2px solid rgba(0,0,0,0.60);
    box-shadow:
      0 14px 18px rgba(0,0,0,0.33),
      inset 0 2px 0 rgba(255,255,255,0.60),
      inset 0 -10px 14px rgba(0,0,0,0.28);

    transform: rotate(var(--wheel-rot, 0deg));
    transform-origin: 50% 50%;
  }
  .wheel:active{ cursor: grabbing; }
  .wheel:focus{
    outline:none;
    box-shadow:
      0 14px 18px rgba(0,0,0,0.33),
      inset 0 2px 0 rgba(255,255,255,0.60),
      inset 0 -10px 14px rgba(0,0,0,0.28),
      0 0 0 4px rgba(249,150,30,0.55);
  }

  /* Sichtfenster (tiefer) */
  .window{
    position:absolute;
    left: 18px;
    top: 58px;
    width: 86px;
    height: 56px;
    border-radius: 14px;
    background: var(--beige);
    border: 2px solid rgba(0,0,0,0.60);
    box-shadow:
      inset 0 8px 12px rgba(0,0,0,0.22),
      inset 0 -2px 0 rgba(255,255,255,0.25),
      0 12px 18px rgba(0,0,0,0.22);
    display:flex;
    align-items:center;
    justify-content:center;
  }
  .window span{
    font-weight: 1000;
    letter-spacing: 0.08em;
    color: var(--rotbraun);
    font-size: 44px;
    text-shadow: 0 1px 0 rgba(255,255,255,0.35);
  }

  /* Min/Max Skala */
  .minmax{
    position:absolute;
    left: 120px;
    top: 72px;
    width: calc(66% - 120px);
    display:flex;
    justify-content:space-between;
    align-items:center;
    font-weight: 1000;
    letter-spacing: 0.10em;
    font-size: 24px;
    text-shadow:
      0 2px 0 rgba(0,0,0,0.85),
      0 8px 18px rgba(0,0,0,0.50);
  }
  .minmax span{
    padding: 6px 10px;
    border-radius: 12px;
    cursor:pointer;
    -webkit-tap-highlight-color: transparent;
    border: 2px solid rgba(0,0,0,0.0);
  }
  .minmax span:active{ transform: scale(0.98); }
  .minmax span:hover{ border-color: rgba(255,255,255,0.10); }

  /* KIPP Button rechts */
  .kippBtn{
    position:absolute;
    right: 18px;
    top: 96px;
    width: 130px;
    height: 70px;
    border-radius: 16px;
    border: 2px solid rgba(0,0,0,0.65);
    background: var(--beige);
    color: rgba(0,0,0,0.92);
    font-weight: 1000;
    letter-spacing: 0.08em;
    font-size: 30px;
    box-shadow:
      0 14px 20px rgba(0,0,0,0.22),
      inset 0 1px 0 rgba(255,255,255,0.18);
    cursor:pointer;
    -webkit-tap-highlight-color: transparent;
  }
  .kippBtn:active{ transform: scale(0.98); filter: brightness(0.98); }

  /* optional: kleines „Pulse“ (nur Titel) */
  .pulse .title{ animation: titlePulse 1.05s ease-in-out infinite; }
  @keyframes titlePulse{
    0%,100%{ filter: brightness(1); }
    50%{ filter: brightness(1.12); }
  }

  /* kleine Demo-Ausgabe */
  .out{
    margin-top: 10px;
    font-size: 16px;
    opacity: 0.85;
    letter-spacing: 0.02em;
  }
</style>
</head>

<body>
  <div class="kippPanel pulse" id="panel">
    <div class="title">KIPP-ANZAHL</div>

    <!-- Doppelpfeil (zeigt: links/rechts drehen) -->
    <div class="doubleArrow" aria-hidden="true">
      <div class="tip left"></div>
      <div class="line"></div>
      <div class="tip right"></div>
    </div>

    <div class="leftArea">
      <div class="slot" aria-hidden="true"></div>

      <div class="wheel" id="wheel" role="slider" tabindex="0"
           aria-label="Kippanzahl Stellrad" aria-valuemin="1" aria-valuemax="11" aria-valuenow="4"></div>

      <div class="window"><span id="val">04</span></div>

      <div class="minmax">
        <span id="min">01</span>
        <span id="max">11</span>
      </div>
    </div>

    <button class="kippBtn" id="kippBtn" type="button">KIPP</button>

    <div class="out" id="out">Drag links/rechts am Stellrad → Kippanzahl ändern.</div>
  </div>

<script>
  const wheel = document.getElementById("wheel");
  const valEl = document.getElementById("val");
  const out   = document.getElementById("out");
  const minEl = document.getElementById("min");
  const maxEl = document.getElementById("max");
  const kippBtn = document.getElementById("kippBtn");
  const panel = document.getElementById("panel");

  let current = 4;

  const clamp = (n,a,b)=>Math.max(a,Math.min(b,n));
  const fmt2  = (n)=>String(n).padStart(2,"0");

  function setValue(n){
    current = clamp(n,1,11);
    valEl.textContent = fmt2(current);
    wheel.setAttribute("aria-valuenow", String(current));

    // nur fürs Feeling: leichte „Rotation“
    const rot = (current-1) * 6; // 0..60°
    wheel.style.setProperty("--wheel-rot", rot + "deg");
  }

  // Drag LEFT/RIGHT (West/Ost)
  (function initDragLR(){
    let dragging = false;
    let startX = 0;
    let startVal = 4;

    const stepPx = 22; // je kleiner, desto empfindlicher

    function getX(e){
      return (e.touches ? e.touches[0].clientX : e.clientX);
    }

    function down(e){
      dragging = true;
      startX = getX(e);
      startVal = current;
      wheel.setPointerCapture?.(e.pointerId || 1);
      e.preventDefault();
    }
    function move(e){
      if(!dragging) return;
      const x = getX(e);
      const dx = x - startX;      // rechts = größer
      const delta = Math.round(dx / stepPx);
      setValue(startVal + delta);
      e.preventDefault();
    }
    function up(){ dragging = false; }

    wheel.addEventListener("pointerdown", down);
    window.addEventListener("pointermove", move, {passive:false});
    window.addEventListener("pointerup", up);

    // Touch fallback
    wheel.addEventListener("touchstart", down, {passive:false});
    window.addEventListener("touchmove", move, {passive:false});
    window.addEventListener("touchend", up);
  })();

  // Keyboard
  wheel.addEventListener("keydown", (e)=>{
    if(e.key==="ArrowRight") setValue(current+1);
    if(e.key==="ArrowLeft")  setValue(current-1);
  });

  // Min/Max taps
  minEl.addEventListener("click", ()=>setValue(1));
  maxEl.addEventListener("click", ()=>setValue(11));

  // KIPP Demo
  kippBtn.addEventListener("click", ()=>{
    panel.classList.remove("pulse");
    out.textContent = `KIPP gedrückt – aktuelle Kippanzahl = ${fmt2(current)} (Demo).`;
    setTimeout(()=>panel.classList.add("pulse"), 700);
  });

  setValue(4);
</script>
</body>
</html>
