<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DigiKipp – Background + Grid (fixed)</title>

  <style>
    :root{
      --cols: 8;
      --cell: 142px;      /* Fixe Rastergröße, wie gewünscht */
      --grid-alpha: 0.18; /* Linien-Transparenz */
    }

    html, body{
      height: 100%;
      margin: 0;
      overflow: hidden; /* ✅ KEIN Scrollen */
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      touch-action: none; /* ✅ verhindert “Rumwischen” (Browser-Scroll/Zoom Gesten) */
    }

    /* ✅ “Holztisch”-Hintergrund (ohne Bilddatei) */
    body{
      background:
        /* leichte Vignette */
        radial-gradient(120% 90% at 50% 10%, rgba(255,255,255,0.18), rgba(0,0,0,0.12) 55%, rgba(0,0,0,0.22) 100%),
        /* Holzmaserung (sehr subtil) */
        repeating-linear-gradient(
          90deg,
          rgba(140,105,70,0.10) 0px,
          rgba(140,105,70,0.10) 10px,
          rgba(230,205,165,0.10) 10px,
          rgba(230,205,165,0.10) 22px
        ),
        /* Grundton (goldbeige/hellbeige) */
        linear-gradient(180deg, #d9c3a2, #cdb28f);
      display: flex;
      justify-content: center;
      align-items: flex-start;
    }

    /* “Viewport”-Bühne */
    .stage{
      width: min(94vw, 688px);
      height: 100vh;      /* ✅ fix */
      position: relative;
      overflow: hidden;   /* ✅ alles was zu lang ist, wird abgeschnitten */
    }

    /* Layout ist exakt 8 Spalten breit, Zeilen so viele wie wir “ausrechnen” */
    .layout{
      position: absolute;
      left: 50%;
      top: 0;
      transform: translateX(-50%);
      width: calc(var(--cols) * var(--cell));
      height: 100vh;
    }

    /* ✅ PNG: oben links verankert, unverzerrt (keine 100%/100% Streckung) */
    .bgPNG{
      position:absolute;
      left: 0;
      top: 0;
      width: calc(var(--cols) * var(--cell));
      height: 9999px; /* “lang genug”; unten wird sowieso abgeschnitten */
      background-image: url("Box_m_Hgr.png");
      background-repeat: no-repeat;
      background-position: left top;
      background-size: auto; /* ✅ unverzerrt */
      image-rendering: auto;
      pointer-events: none;
      z-index: 0;
    }

    /* Grid Layer (optional einblendbar) */
    .grid{
      position:absolute;
      left: 0;
      top: 0;
      width: calc(var(--cols) * var(--cell));
      height: 100vh;
      display: grid;
      grid-template-columns: repeat(var(--cols), var(--cell));
      grid-auto-rows: var(--cell);
      z-index: 2;
      pointer-events: none;
      opacity: 1;
    }

    .cell{
      box-sizing: border-box;
      border: 1px solid rgba(255,255,255,var(--grid-alpha));
      background: transparent;
    }

    /* Debug Panel unten */
    .debug{
      position: fixed;
      left: 14px;
      right: 14px;
      bottom: 18px;
      z-index: 50;
      border-radius: 16px;
      padding: 14px 14px 12px 14px;
      background: rgba(0,0,0,0.55);
      color: #fff;
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      box-shadow: 0 14px 30px rgba(0,0,0,0.35);
      user-select: none;
    }

    .debug label{
      display:flex;
      align-items:center;
      gap: 10px;
      font-weight: 700;
      margin-bottom: 10px;
    }

    .debug code{
      display:block;
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
      font-size: 13px;
      line-height: 1.25;
      opacity: 0.95;
      white-space: pre-wrap;
    }
  </style>
</head>

<body>
  <div class="stage" id="stage">
    <div class="layout" id="layout">
      <div class="bgPNG" aria-hidden="true"></div>
      <div class="grid" id="grid" aria-hidden="true"></div>
    </div>
  </div>

  <div class="debug">
    <label>
      <input type="checkbox" id="toggleGrid" checked>
      Grid anzeigen
    </label>
    <code id="info">...</code>
  </div>

  <script>
    const gridEl = document.getElementById("grid");
    const infoEl = document.getElementById("info");
    const toggle = document.getElementById("toggleGrid");

    function rebuildGrid(){
      // Rows so viele, wie in 100vh reinpassen (plus 1 als Reserve)
      const cell = parseInt(getComputedStyle(document.documentElement).getPropertyValue("--cell"), 10) || 142;
      const cols = parseInt(getComputedStyle(document.documentElement).getPropertyValue("--cols"), 10) || 8;

      const vh = window.innerHeight;
      const rows = Math.ceil(vh / cell) + 1;

      gridEl.innerHTML = "";
      const total = rows * cols;
      for(let i=0;i<total;i++){
        const d = document.createElement("div");
        d.className = "cell";
        gridEl.appendChild(d);
      }

      const vw = window.innerWidth;
      infoEl.textContent =
        `cell=${cell}px | cols=${cols} | rows=${rows}\n` +
        `viewport=${vw}x${vh}\n` +
        `scroll=OFF (fixed stage)`;
    }

    toggle.addEventListener("change", () => {
      gridEl.style.display = toggle.checked ? "grid" : "none";
    });

    window.addEventListener("load", rebuildGrid);
    window.addEventListener("resize", rebuildGrid);

    // Extra: verhindert iOS/Android “rubber band” / Scroll-Start
    document.addEventListener("touchmove", (e) => e.preventDefault(), { passive:false });
  </script>
</body>
</html>
